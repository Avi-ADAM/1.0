# ✅ Haluka Approval System - Testing Checklist

## בדיקות לפני Production

### 1. בדיקות בסיסיות
- [ ] הקומפוננטה `halukaask.svelte` נטענת ללא שגיאות
- [ ] כפתור האישור מופיע ועובד
- [ ] ספירת המשתמשים מתעדכנת נכון

### 2. בדיקות אישור חלוקה
- [ ] כשמשתמש אחד מאשר - רק מתווספת הצבעה
- [ ] כשכל המשתמשים מאשרים - החלוקה מתבצעת
- [ ] ה-tosplit מסומן כ-finished
- [ ] כל ה-sales מסומנים כ-splited
- [ ] כל ה-halukot מסומנות כ-ushar

### 3. בדיקות התראות

#### Socket.IO
- [ ] משתמשים מחוברים מקבלים עדכון בזמן אמת
- [ ] העדכון מכיל את המידע הנכון
- [ ] העדכון בשפה הנכונה

#### Email
- [ ] מיילים נשלחים לכל המשתמשים
- [ ] משתמשים עם `noMail: true` לא מקבלים מייל
- [ ] מקבלי כסף מקבלים מייל עם קונפטי 🎉
- [ ] נותני כסף מקבלים מייל רשמי 📋
- [ ] המיילים בשפה הנכונה (עברית/אנגלית/ערבית)
- [ ] הסכומים נכונים במייל
- [ ] הקישור "צפה בפרטים" עובד

#### Telegram
- [ ] משתמשים עם `telegramId` מקבלים הודעה
- [ ] משתמשים בלי `telegramId` לא מקבלים הודעה
- [ ] ההודעה בשפה הנכונה
- [ ] הקישור עובד

#### Push Notifications
- [ ] התראות נשלחות לכל המכשירים הרשומים
- [ ] ההתראה בשפה הנכונה
- [ ] הקישור עובד

### 4. בדיקות תוכן מותאם

#### למקבל כסף (100 ש״ח):
- [ ] כותרת: "🎉 מזל טוב! קיבלת 100 ש״ח"
- [ ] תוכן: "החלוקה אושרה והסכום של 100 ש״ח נוסף ליתרה שלך! 💰"
- [ ] עיצוב חגיגי עם קונפטי

#### לנותן כסף (100 ש״ח):
- [ ] כותרת: "חלוקה אושרה - 100 ש״ח"
- [ ] תוכן: "החלוקה אושרה. עליך להעביר 100 ש״ח. תודה על שיתוף הפעולה 🤝"
- [ ] עיצוב רשמי

#### למשתמש עם יתרה מאוזנת:
- [ ] כותרת: "חלוקה אושרה"
- [ ] תוכן: "החלוקה אושרה. היתרה שלך מאוזנת"

### 5. בדיקות שפה
- [ ] משתמש עברי מקבל התראות בעברית
- [ ] משתמש אנגלי מקבל התראות באנגלית
- [ ] משתמש ערבי מקבל התראות בערבית
- [ ] משתמש עם שפה לא נתמכת מקבל בשפת ברירת המחדל

### 6. בדיקות שגיאות
- [ ] שגיאת רשת - מוצג הודעת שגיאה למשתמש
- [ ] tosplit לא קיים - מוצג הודעת שגיאה
- [ ] משתמש לא מורשה - מוצג הודעת שגיאה
- [ ] שגיאה בשליחת התראה - לא משפיעה על אישור החלוקה

### 7. בדיקות ביצועים
- [ ] התגובה למשתמש מהירה (< 1 שניה)
- [ ] ההתראות נשלחות במקביל
- [ ] אין חסימה של הממשק

### 8. בדיקות UI/UX
- [ ] הנפשת המטבע (coinLapach) עובדת
- [ ] הממשק מתעדכן אחרי אישור
- [ ] אין שגיאות בקונסול
- [ ] הכל נראה טוב במובייל
- [ ] הכל נראה טוב בדסקטופ

## בדיקות מתקדמות

### 9. בדיקות Edge Cases
- [ ] חלוקה עם משתמש אחד
- [ ] חלוקה עם 10+ משתמשים
- [ ] חלוקה עם סכומים גדולים (1000+ ש״ח)
- [ ] חלוקה עם סכומים קטנים (1 ש״ח)
- [ ] חלוקה עם סכומים שליליים (אם רלוונטי)
- [ ] משתמש מאשר פעמיים (לא אמור לקרות)

### 10. בדיקות אינטגרציה
- [ ] החלוקה מופיעה נכון בדף הפרויקט
- [ ] היתרות מתעדכנות נכון
- [ ] ההיסטוריה נשמרת
- [ ] הסטטיסטיקות מתעדכנות

## איך לבדוק?

### בדיקה מקומית:
```bash
# 1. הרץ את השרת
npm run dev

# 2. פתח את הדפדפן
# http://localhost:5173

# 3. נווט לפרויקט עם חלוקה
# 4. אשר את החלוקה
# 5. בדוק את הקונסול לשגיאות
# 6. בדוק את המיילים (אם יש שרת מייל מקומי)
```

### בדיקה ב-Production:
```bash
# 1. Deploy לסביבת staging
# 2. בדוק עם משתמשים אמיתיים
# 3. בדוק את כל הערוצים
# 4. אם הכל עובד - Deploy ל-production
```

## דברים לשים לב אליהם

### ⚠️ חשוב!
- וודא שיש חיבור ל-Socket.IO server
- וודא ששרת המיילים עובד
- וודא ששרת הטלגרם עובד
- וודא שיש הרשאות נכונות ב-Strapi

### 🔍 Debug
אם משהו לא עובד:
1. בדוק את הקונסול בדפדפן
2. בדוק את הלוגים בשרת
3. בדוק את הרשת (Network tab)
4. בדוק את ה-cookies (JWT, id, lang)

## סיימת את כל הבדיקות?

✅ אם כן - המערכת מוכנה ל-Production!
❌ אם לא - תקן את הבעיות וחזור על הבדיקות

---

**בהצלחה! 🚀**
